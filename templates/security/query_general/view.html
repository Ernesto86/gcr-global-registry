{% extends 'base.html' %}
{% block header %}
    {% include 'header.html' %}
{% endblock %}

{% block sidebar-navbar %}{% endblock %}

{% block container-main %}
    <div class="container-fluid text-center d-flex justify-content-center align-items-center" style="margin: 3rem;">
        <div class="row">
            <aside class="col-lg-12 col-md">
                <div class="card">
                    <div class="card-body">
                        <div class="text-center" style="margin-top: 2rem">
                            <img src="/static/img/logo/gr-logo.png" height="120">
                        </div>
                        <div class="pt-5">
                            <form id="id-form-buscar" action="" method="POST">
                                {% csrf_token %}

                                <div id="div_id_country" class="form-group">
                                    <label for="id_country" class=""> Nacionalidad </label>
                                    <div>
                                        <select name="country" class="select form-control" id="id-country" required>
                                            <option value="" {% if not country %} selected="" {% endif %}>
                                                ---------------
                                            </option>

                                            {% for sys_country in sys_country_list %}
                                                <option value="{{ sys_country.id }}" {% if sys_country.id == country %} selected="" {% endif %}>
                                                    {{ sys_country.name }}
                                                </option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <div id="div_id_identification" class="form-group">
                                    <label for="id_identification" class=" requiredField">
                                        Identificacion <span class="asteriskField">*</span>
                                    </label>
                                    <div>
                                        <input type="text" name="identification" maxlength="100" class="textinput textInput form-control" required="" value="{{ identification }}" id="id_identification">
                                    </div>
                                </div>

                                <div id="div_id_character" class="form-group">
                                    <label for="id_character" class=" requiredField">
                                        Caracteres de seguridad <span class="asteriskField">*</span>
                                    </label>
                                    <div>
                                        <input type="text" name="character" maxlength="100" class="textinput textInput form-control" required="" value="{{ character }}" id="id_character">
                                    </div>
                                </div>

                                <div class="text-center" style="margin-top: 5rem">
                                    <button type="submit" class="btn btn-lg btn-success" style="font-size: 26px; border-radius: 20px; width: 25rem ; padding-top: 11px; padding-bottom: 10px">
                                        <b>Buscar</b>
                                    </button>
                                </div>
                            </form>
                        </div>
                        <br>
                    </div>
                </div>
            </aside>
            <aside class="col-lg-12 col-md">
                <div class="card">
                    <div class="card-body">
                        <div class="text-center">
                            {% if student %}
                                <h2>Informaciòn del usuario</h2>
                                <div class="table-responsive">
                                    <table style="width: 100%">
                                        <tbody>
                                        <tr>
                                            <td class="text-right pr-3" style="width: 50%">Identificacion:</td>
                                            <td class="text-left">{{ student.dni }}</td>
                                        </tr>
                                        <tr>
                                            <td class="text-right pr-3" style="width: 50%">Nombres:</td>
                                            <td class="text-left">{{ student.names }}</td>
                                        </tr>
                                        <tr>
                                            <td class="text-right pr-3" style="width: 50%">Gènero:</td>
                                            <td class="text-left">{{ student.get_gender_display }}</td>
                                        </tr>
                                        <tr>
                                            <td class="text-right pr-3" style="width: 50%">Nacionalidad:</td>
                                            <td class="text-left">{{ student.country }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            {% else %}
                                {% if identification %}
                                    <div class="alert alert-danger mb-0 mt-5" role="alert">
                                        No existe registro con el siguiente dni {{ identification }}
                                    </div>
                                {% endif %}
                            {% endif %}
                        </div>
                        <br>
                    </div>
                </div>
            </aside>

            <aside class="col-lg-12 col-md">
                <div class="card">
                    <div class="card-body">

                        {% for type_registries in type_registries_list %}
                            <div
                                    class="pt-3 pb-3 pl-3 ml-3 text-white text-left"
                                    role="alert"
                                    style="background: {{ type_registries.color }}; width: 60%; border-top-left-radius: 10px; border-top-right-radius: 10px"
                            >
                                <h5 class="font-weight-bold">Registros de {{ type_registries.name|title }} - {{ type_registries.detail|title }}</h5>
                            </div>
                            <div class="table-responsive p-4 mb-3" style="border: 3px solid black; border-radius: 15px" >

                                <table class="table">
                                    <thead style="background: {{ type_registries.color }} !important;">
                                    <tr style="font-size: 1.2rem">
                                        <th class="text-white" scope="col">Titulo o Certificado</th>
                                        <th class="text-white" scope="col">Institucion</th>
                                        <th class="text-white" scope="col">Pais</th>
                                        <th class="text-white" scope="col">Fecha de Emisión</th>
                                        <th class="text-white" scope="col">Código Internacionla de Registro</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for student_registers  in type_registries.student_registers_list %}
                                        <tr style="color: black;" >
                                            <td>{{ student_registers.certificate }}</td>
                                            <td>{{ student_registers.institution }}</td>
                                            <td>{{ student_registers.country }}</td>
                                            <td>{{ student_registers.date_issue }}</td>
                                            <td>{{ student_registers.code_international_register }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>

                            </div>
                        {% endfor %}
                        <br>
                    </div>
                </div>
            </aside>
        </div>
    </div>
{% endblock %}
{% block jscript %}
{% endblock %}
